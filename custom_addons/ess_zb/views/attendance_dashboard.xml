<?xml version="1.0" encoding="utf-8"?>
<templates>
    <t t-name="ess_zb.AttendanceDashboard" owl="1">
        <div class="o_attendance_dashboard">
            <!-- Header -->
            <div class="o_attendance_header">
                <div class="o_attendance_welcome">
                    <h2>Welcome, <t t-esc="state.employeeName"/></h2>
                    <div class="o_current_time">
                        <i class="fa fa-clock-o"/> <t t-esc="state.currentTime"/>
                    </div>
                </div>
            </div>

            <!-- Status Card -->
            <div class="o_attendance_status_card">
                <div class="row">
                    <div class="col-md-6">
                        <div t-attf-class="o_status_indicator #{state.isCheckedIn ? 'o_checked_in' : 'o_checked_out'}">
                            <i t-attf-class="fa #{state.isCheckedIn ? 'fa-check-circle' : 'fa-times-circle'}"/>
                            <span t-if="state.isCheckedIn">Checked In</span>
                            <span t-else="">Not Checked In</span>
                        </div>
                    </div>
                    <div class="col-md-6" t-if="state.isCheckedIn">
                        <div class="o_work_info">
                            <div class="o_info_item">
                                <span class="o_label">Check-in Time:</span>
                                <span class="o_value"><t t-esc="state.checkInTime"/></span>
                            </div>
                            <div class="o_info_item">
                                <span class="o_label">Hours Worked:</span>
                                <span class="o_value"><t t-esc="formatWorkedHours()"/></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="o_attendance_actions">
                <button
                    t-if="!state.isCheckedIn"
                    class="btn btn-primary btn-lg o_btn_check_in"
                    t-on-click="checkIn"
                    t-att-disabled="state.loading">
                    <i class="fa fa-sign-in"/> 
                    <span t-if="!state.loading">Check In</span>
                    <span t-else="">Processing...</span>
                </button>

                <button
                    t-if="state.isCheckedIn"
                    class="btn btn-danger btn-lg o_btn_check_out"
                    t-on-click="checkOut"
                    t-att-disabled="state.loading">
                    <i class="fa fa-sign-out"/> 
                    <span t-if="!state.loading">Check Out</span>
                    <span t-else="">Processing...</span>
                </button>
            </div>

            <!-- Info Card -->
            <div class="o_attendance_info">
                <div class="alert alert-info">
                    <i class="fa fa-info-circle"/> 
                    Location tracking is enabled. Please ensure GPS is turned on for accurate check-in/check-out.
                </div>
            </div>
        </div>
    </t>
</templates>
